# é¡¹ç›®ç»“æ„è¯´æ˜

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†é¡¹ç›®çš„ç›®å½•ç»“æ„å’Œå„æ–‡ä»¶çš„ä½œç”¨ã€‚

## ğŸ“ æ•´ä½“ç»“æ„

```
dbsfn/
â”œâ”€â”€ backend/                    # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ routes/                 # APIè·¯ç”±
â”‚   â”œâ”€â”€ app.py                  # Flaskåº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ config.py               # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ models.py               # æ•°æ®åº“æ¨¡å‹
â”‚   â”œâ”€â”€ requirements.txt        # Pythonä¾èµ–
â”‚   â”œâ”€â”€ env.template            # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”‚   â””â”€â”€ .gitignore              # Gitå¿½ç•¥æ–‡ä»¶
â”‚
â”œâ”€â”€ frontend/                   # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/                    # æºä»£ç 
â”‚   â”‚   â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ App.jsx             # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ main.jsx            # åº”ç”¨å…¥å£
â”‚   â”‚   â””â”€â”€ index.css           # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ index.html              # HTMLæ¨¡æ¿
â”‚   â”œâ”€â”€ package.json            # Node.jsä¾èµ–
â”‚   â”œâ”€â”€ vite.config.js          # Viteé…ç½®
â”‚   â””â”€â”€ .gitignore              # Gitå¿½ç•¥æ–‡ä»¶
â”‚
â”œâ”€â”€ database/                   # æ•°æ®åº“è„šæœ¬
â”‚   â”œâ”€â”€ sql/                    # SQLè„šæœ¬ç›®å½•
â”‚   â”‚   â”œâ”€â”€ schema/             # è¡¨ç»“æ„è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ triggers/           # è§¦å‘å™¨è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ seed/               # ç¤ºä¾‹æ•°æ®è„šæœ¬
â”‚   â”‚   â””â”€â”€ security/           # å®‰å…¨é…ç½®è„šæœ¬
â”‚   â”œâ”€â”€ schema.sql              # ç»“æ„å…¥å£è„šæœ¬
â”‚   â”œâ”€â”€ triggers.sql            # è§¦å‘å™¨å…¥å£è„šæœ¬
â”‚   â”œâ”€â”€ seed.sql                # æ•°æ®å…¥å£è„šæœ¬
â”‚   â”œâ”€â”€ security.sql            # å®‰å…¨å…¥å£è„šæœ¬
â”‚   â”œâ”€â”€ routines.sql            # å­˜å‚¨è¿‡ç¨‹å…¥å£è„šæœ¬
â”‚   â””â”€â”€ README.md               # æ•°æ®åº“è¯´æ˜æ–‡æ¡£
â”‚
â”œâ”€â”€ start_backend.bat           # Windowsåç«¯å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start_frontend.bat          # Windowså‰ç«¯å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start_backend.sh            # Unix/Linuxåç«¯å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start_frontend.sh           # Unix/Linuxå‰ç«¯å¯åŠ¨è„šæœ¬
â”œâ”€â”€ README.md                   # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ TESTING.md                  # æµ‹è¯•æŒ‡å—
â”œâ”€â”€ PROJECT_STRUCTURE.md        # é¡¹ç›®ç»“æ„è¯´æ˜ï¼ˆæœ¬æ–‡æ¡£ï¼‰

```

## ğŸ”§ åç«¯ (Backend)

### `backend/app.py`
Flask åº”ç”¨çš„ä¸»å…¥å£æ–‡ä»¶ï¼Œè´Ÿè´£ï¼š
- åˆ›å»º Flask åº”ç”¨å®ä¾‹
- åˆå§‹åŒ–æ•°æ®åº“è¿æ¥
- æ³¨å†Œæ‰€æœ‰ API è·¯ç”±
- é…ç½® CORS
- æä¾›å¥åº·æ£€æŸ¥æ¥å£
- é”™è¯¯å¤„ç†

### `backend/config.py`
åº”ç”¨é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«ï¼š
- æ•°æ®åº“è¿æ¥é…ç½®
- Flask é…ç½®
- CORS é…ç½®
- æœåŠ¡å™¨é…ç½®

### `backend/models.py`
SQLAlchemy ORM æ¨¡å‹å®šä¹‰ï¼ŒåŒ…å«æ‰€æœ‰æ•°æ®åº“è¡¨çš„æ˜ å°„ï¼š
- `Department` - ç§‘å®¤è¡¨
- `Staff` - å‘˜å·¥è¡¨
- `Patient` - æ‚£è€…è¡¨
- `DoctorSchedule` - åŒ»ç”Ÿæ’ç­è¡¨
- `Registration` - æŒ‚å·è¡¨
- `Encounter` - å°±è¯Šè®°å½•è¡¨
- `Invoice` - å‘ç¥¨è¡¨
- `Payment` - æ”¯ä»˜è®°å½•è¡¨
- `ChargeCatalog` - æ”¶è´¹é¡¹ç›®è¡¨
- `Charge` - è´¹ç”¨æ˜ç»†è¡¨
- `InvoiceLine` - å‘ç¥¨æ˜ç»†è¡¨

### `backend/routes/`
API è·¯ç”±æ¨¡å—ï¼ŒæŒ‰åŠŸèƒ½åˆ†ç±»ï¼š

#### `routes/__init__.py`
è·¯ç”±æ¨¡å—åˆå§‹åŒ–æ–‡ä»¶ï¼Œå¯¼å‡ºæ‰€æœ‰è“å›¾ã€‚

#### `routes/patient.py`
æ‚£è€…ç®¡ç† APIï¼š
- `GET /api/patients/` - è·å–æ‚£è€…åˆ—è¡¨
- `GET /api/patients/:id` - è·å–æ‚£è€…è¯¦æƒ…
- `POST /api/patients/` - åˆ›å»ºæ‚£è€…
- `PUT /api/patients/:id` - æ›´æ–°æ‚£è€…
- `DELETE /api/patients/:id` - åˆ é™¤æ‚£è€…

#### `routes/schedule.py`
æ’ç­ç®¡ç† APIï¼š
- `GET /api/schedules/` - è·å–æ’ç­åˆ—è¡¨
- `GET /api/schedules/:id` - è·å–æ’ç­è¯¦æƒ…
- `POST /api/schedules/` - åˆ›å»ºæ’ç­
- `PUT /api/schedules/:id` - æ›´æ–°æ’ç­
- `DELETE /api/schedules/:id` - åˆ é™¤æ’ç­

#### `routes/registration.py`
æŒ‚å·ç®¡ç† APIï¼š
- `GET /api/registrations/` - è·å–æŒ‚å·åˆ—è¡¨
- `GET /api/registrations/:id` - è·å–æŒ‚å·è¯¦æƒ…
- `POST /api/registrations/` - åˆ›å»ºæŒ‚å·
- `POST /api/registrations/:id/cancel` - å–æ¶ˆæŒ‚å·
- `POST /api/registrations/:id/complete` - å®ŒæˆæŒ‚å·

#### `routes/encounter.py`
å°±è¯Šç®¡ç† APIï¼š
- `GET /api/encounters/` - è·å–å°±è¯Šåˆ—è¡¨
- `GET /api/encounters/:id` - è·å–å°±è¯Šè¯¦æƒ…
- `POST /api/encounters/` - åˆ›å»ºå°±è¯Šï¼ˆåˆ°é™¢ç™»è®°ï¼‰
- `PUT /api/encounters/:id` - æ›´æ–°å°±è¯Š
- `POST /api/encounters/:id/close` - ç»“æŸå°±è¯Š

#### `routes/invoice.py`
å‘ç¥¨ç®¡ç† APIï¼š
- `GET /api/invoices/` - è·å–å‘ç¥¨åˆ—è¡¨
- `GET /api/invoices/:id` - è·å–å‘ç¥¨è¯¦æƒ…
- `POST /api/invoices/` - åˆ›å»ºå‘ç¥¨
- `POST /api/invoices/:id/void` - ä½œåºŸå‘ç¥¨
- `GET /api/invoices/encounter/:id/unbilled-charges` - è·å–æœªå¼€ç¥¨è´¹ç”¨

#### `routes/payment.py`
æ”¯ä»˜ç®¡ç† APIï¼š
- `GET /api/payments/` - è·å–æ”¯ä»˜åˆ—è¡¨
- `GET /api/payments/:id` - è·å–æ”¯ä»˜è¯¦æƒ…
- `POST /api/payments/` - åˆ›å»ºæ”¯ä»˜
- `POST /api/payments/:id/cancel` - å–æ¶ˆæ”¯ä»˜

#### `routes/staff.py`
å‘˜å·¥ç®¡ç† APIï¼š
- `GET /api/staff/` - è·å–å‘˜å·¥åˆ—è¡¨
- `GET /api/staff/:id` - è·å–å‘˜å·¥è¯¦æƒ…
- `POST /api/staff/` - åˆ›å»ºå‘˜å·¥
- `PUT /api/staff/:id` - æ›´æ–°å‘˜å·¥
- `DELETE /api/staff/:id` - åˆ é™¤å‘˜å·¥

#### `routes/department.py`
ç§‘å®¤ç®¡ç† APIï¼š
- `GET /api/departments/` - è·å–ç§‘å®¤åˆ—è¡¨
- `GET /api/departments/:id` - è·å–ç§‘å®¤è¯¦æƒ…
- `POST /api/departments/` - åˆ›å»ºç§‘å®¤
- `PUT /api/departments/:id` - æ›´æ–°ç§‘å®¤
- `DELETE /api/departments/:id` - åˆ é™¤ç§‘å®¤

#### `routes/statistics.py`
ç»Ÿè®¡æŠ¥è¡¨ APIï¼š
- `GET /api/statistics/dashboard` - ä»ªè¡¨ç›˜æ•°æ®
- `GET /api/statistics/revenue` - æ”¶å…¥ç»Ÿè®¡
- `GET /api/statistics/encounters` - å°±è¯Šç»Ÿè®¡
- `GET /api/statistics/department-revenue` - ç§‘å®¤æ”¶å…¥ç»Ÿè®¡
- `GET /api/statistics/doctor-workload` - åŒ»ç”Ÿå·¥ä½œé‡ç»Ÿè®¡

## ğŸ¨ å‰ç«¯ (Frontend)

### `frontend/src/main.jsx`
React åº”ç”¨å…¥å£ï¼Œè´Ÿè´£ï¼š
- æ¸²æŸ“æ ¹ç»„ä»¶
- é…ç½®è·¯ç”±
- é…ç½®å›½é™…åŒ–
- é…ç½®ä¸»é¢˜

### `frontend/src/App.jsx`
ä¸»åº”ç”¨ç»„ä»¶ï¼ŒåŒ…å«ï¼š
- æ•´ä½“å¸ƒå±€ï¼ˆHeaderã€Siderã€Contentï¼‰
- è·¯ç”±é…ç½®
- ä¾§è¾¹æ èœå•

### `frontend/src/utils/api.js`
API å·¥å…·å‡½æ•°ï¼ŒåŒ…å«ï¼š
- Axios å®ä¾‹é…ç½®
- è¯·æ±‚/å“åº”æ‹¦æˆªå™¨
- æ‰€æœ‰ API æ–¹æ³•çš„å°è£…

### `frontend/src/pages/`
é¡µé¢ç»„ä»¶ç›®å½•ï¼š

#### `Dashboard.jsx`
ä»ªè¡¨ç›˜é¡µé¢ï¼Œæ˜¾ç¤ºï¼š
- ä»Šæ—¥ç»Ÿè®¡æ•°æ®
- æœ¬æœˆç»Ÿè®¡æ•°æ®

#### `PatientList.jsx` / `PatientForm.jsx`
æ‚£è€…ç®¡ç†é¡µé¢ï¼š
- æ‚£è€…åˆ—è¡¨ï¼ˆæœç´¢ã€åˆ†é¡µï¼‰
- æ–°å»º/ç¼–è¾‘æ‚£è€…è¡¨å•

#### `ScheduleList.jsx` / `ScheduleForm.jsx`
æ’ç­ç®¡ç†é¡µé¢ï¼š
- æ’ç­åˆ—è¡¨ï¼ˆæŒ‰æ—¥æœŸã€ç§‘å®¤ç­›é€‰ï¼‰
- æ–°å»º/ç¼–è¾‘æ’ç­è¡¨å•

#### `RegistrationList.jsx` / `RegistrationForm.jsx`
æŒ‚å·ç®¡ç†é¡µé¢ï¼š
- æŒ‚å·åˆ—è¡¨ï¼ˆæŒ‰çŠ¶æ€ç­›é€‰ï¼‰
- é¢„çº¦æŒ‚å·è¡¨å•ï¼ˆé€‰æ‹©æ’ç­ï¼‰

#### `EncounterList.jsx` / `EncounterForm.jsx`
å°±è¯Šç®¡ç†é¡µé¢ï¼š
- å°±è¯Šåˆ—è¡¨ï¼ˆæŒ‰çŠ¶æ€ç­›é€‰ï¼‰
- åˆ°é™¢ç™»è®°è¡¨å•

#### `InvoiceList.jsx` / `InvoiceForm.jsx`
æ”¶è´¹ç®¡ç†é¡µé¢ï¼š
- å‘ç¥¨åˆ—è¡¨ï¼ˆæŒ‰çŠ¶æ€ç­›é€‰ï¼‰
- å¼€è´¦å•è¡¨å•

#### `PaymentForm.jsx`
æ”¶æ¬¾é¡µé¢ï¼š
- æ”¶æ¬¾è¡¨å•ï¼ˆé€‰æ‹©å‘ç¥¨ã€æ”¯ä»˜æ–¹å¼ã€é‡‘é¢ï¼‰

#### `StaffList.jsx` / `StaffForm.jsx`
å‘˜å·¥ç®¡ç†é¡µé¢ï¼š
- å‘˜å·¥åˆ—è¡¨ï¼ˆæœç´¢ã€åˆ†é¡µï¼‰
- æ–°å»º/ç¼–è¾‘å‘˜å·¥è¡¨å•

#### `DepartmentList.jsx`
ç§‘å®¤ç®¡ç†é¡µé¢ï¼š
- ç§‘å®¤åˆ—è¡¨
- æ–°å»º/ç¼–è¾‘ç§‘å®¤ï¼ˆå¼¹çª—ï¼‰

#### `Statistics.jsx`
ç»Ÿè®¡æŠ¥è¡¨é¡µé¢ï¼š
- ç§‘å®¤æ”¶å…¥ç»Ÿè®¡è¡¨
- åŒ»ç”Ÿå·¥ä½œé‡ç»Ÿè®¡è¡¨
- æ¯æ—¥æ”¶å…¥ç»Ÿè®¡è¡¨

### `frontend/vite.config.js`
Vite é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«ï¼š
- React æ’ä»¶é…ç½®
- å¼€å‘æœåŠ¡å™¨é…ç½®
- ä»£ç†é…ç½®ï¼ˆå°† /api è¯·æ±‚ä»£ç†åˆ°åç«¯ï¼‰

## ğŸ—„ï¸ æ•°æ®åº“ (Database)

### `database/schema.sql`
æ•°æ®åº“ç»“æ„å®šä¹‰å…¥å£ï¼ŒåŒ…å«ï¼š
- åˆ›å»ºæ•°æ®åº“
- åˆ›å»ºæ‰€æœ‰è¡¨
- å®šä¹‰å¤–é”®å…³ç³»
- æ·»åŠ ç´¢å¼•

### `database/triggers.sql`
è§¦å‘å™¨å®šä¹‰ï¼ŒåŒ…å«ï¼š
- å®¡è®¡æ—¥å¿—è§¦å‘å™¨
- æ•°æ®éªŒè¯è§¦å‘å™¨
- è‡ªåŠ¨è®¡ç®—è§¦å‘å™¨

### `database/seed.sql`
ç¤ºä¾‹æ•°æ®è„šæœ¬ï¼ŒåŒ…å«ï¼š
- ç§‘å®¤æ•°æ®
- å‘˜å·¥æ•°æ®
- æ‚£è€…æ•°æ®
- æ’ç­æ•°æ®

### `database/security.sql`
å®‰å…¨é…ç½®è„šæœ¬ï¼ŒåŒ…å«ï¼š
- ç”¨æˆ·è§’è‰²å®šä¹‰
- è§†å›¾å®šä¹‰
- æƒé™åˆ†é…

### `database/routines.sql`
å­˜å‚¨è¿‡ç¨‹å®šä¹‰ï¼ŒåŒ…å«ï¼š
- ä¸šåŠ¡é€»è¾‘å­˜å‚¨è¿‡ç¨‹
- æŸ¥è¯¢å­˜å‚¨è¿‡ç¨‹

## ğŸš€ å¯åŠ¨è„šæœ¬

### Windows
- `start_backend.bat` - å¯åŠ¨åç«¯æœåŠ¡
- `start_frontend.bat` - å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨

### Unix/Linux/macOS
- `start_backend.sh` - å¯åŠ¨åç«¯æœåŠ¡
- `start_frontend.sh` - å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨

## ğŸ“„ æ–‡æ¡£

### `README.md`
é¡¹ç›®ä¸»æ–‡æ¡£ï¼ŒåŒ…å«ï¼š
- é¡¹ç›®ç®€ä»‹
- åŠŸèƒ½ç‰¹æ€§
- æŠ€æœ¯æ ˆ
- å®‰è£…éƒ¨ç½²æŒ‡å—
- ä½¿ç”¨è¯´æ˜
- å¸¸è§é—®é¢˜

### `TESTING.md`
æµ‹è¯•æŒ‡å—ï¼ŒåŒ…å«ï¼š
- æµ‹è¯•å‰å‡†å¤‡
- åŠŸèƒ½æµ‹è¯•æ¸…å•
- API æµ‹è¯•æ–¹æ³•
- é—®é¢˜æ’æŸ¥æŒ‡å—

### `PROJECT_STRUCTURE.md`
é¡¹ç›®ç»“æ„è¯´æ˜ï¼ˆæœ¬æ–‡æ¡£ï¼‰ã€‚

## ğŸ”„ æ•°æ®æµå‘

```
ç”¨æˆ·æ“ä½œ (æµè§ˆå™¨)
    â†“
å‰ç«¯é¡µé¢ (Reactç»„ä»¶)
    â†“
APIè°ƒç”¨ (axios)
    â†“
åç«¯è·¯ç”± (Flask Blueprint)
    â†“
ä¸šåŠ¡é€»è¾‘å¤„ç†
    â†“
æ•°æ®åº“æ“ä½œ (SQLAlchemy ORM)
    â†“
MySQLæ•°æ®åº“
    â†“
è¿”å›æ•°æ®
    â†“
å‰ç«¯æ˜¾ç¤º
```

## ğŸ” å®‰å…¨æ€§è¯´æ˜

### å½“å‰å®ç°
- åŸºæœ¬çš„è¾“å…¥éªŒè¯
- SQLæ³¨å…¥é˜²æŠ¤ï¼ˆé€šè¿‡ORMï¼‰
- CORSé…ç½®

### ç”Ÿäº§ç¯å¢ƒéœ€è¦æ·»åŠ 
- ç”¨æˆ·è®¤è¯ï¼ˆJWTï¼‰
- ç”¨æˆ·æˆæƒï¼ˆåŸºäºè§’è‰²ï¼‰
- HTTPSæ”¯æŒ
- å¯†ç åŠ å¯†
- æ—¥å¿—è®°å½•
- è¯·æ±‚é™æµ
- XSSé˜²æŠ¤
- CSRFé˜²æŠ¤

## ğŸ“ˆ æ‰©å±•å»ºè®®

### åŠŸèƒ½æ‰©å±•
1. ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
2. æƒé™ç®¡ç†ç³»ç»Ÿ
3. æ¶ˆæ¯é€šçŸ¥ç³»ç»Ÿ
4. æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
5. æŠ¥è¡¨å¯¼å‡ºåŠŸèƒ½
6. æ•°æ®å¤‡ä»½åŠŸèƒ½

### æ€§èƒ½ä¼˜åŒ–
1. æ·»åŠ Redisç¼“å­˜
2. æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
3. å‰ç«¯ä»£ç åˆ†å‰²
4. å›¾ç‰‡æ‡’åŠ è½½
5. CDNåŠ é€Ÿ

### éƒ¨ç½²ä¼˜åŒ–
1. Dockerå®¹å™¨åŒ–
2. CI/CDé…ç½®
3. ç›‘æ§å‘Šè­¦
4. æ—¥å¿—ç³»ç»Ÿ
5. è´Ÿè½½å‡è¡¡

## ğŸ’¡ é¢å¤–è¯´æ˜

1. **ä¸ºä»€ä¹ˆé€‰æ‹© ORM è€Œä¸æ˜¯ JDBC?**
   - Python ç”Ÿæ€ä¸­ï¼ŒORMï¼ˆSQLAlchemyï¼‰æ˜¯æ ‡å‡†å®è·µ
   - ORM æ¯” JDBC æ›´å®‰å…¨ã€æ›´æ˜“ç»´æŠ¤
   - å®Œå…¨ç¬¦åˆä½œä¸š"é€šè¿‡ ORM å®ç°æ•°æ®åº“äº¤äº’"çš„è¦æ±‚

2. **ä¸ºä»€ä¹ˆä¸ä½¿ç”¨ JDBC?**
   - JDBC æ˜¯ Java ä¸“ç”¨çš„æ•°æ®åº“è¿æ¥æŠ€æœ¯
   - æœ¬é¡¹ç›®ä½¿ç”¨ Pythonï¼ŒPython çš„ç­‰ä»·æ–¹æ¡ˆæ˜¯ DB-API + ORM
   - SQLAlchemy ORM åœ¨ Python ä¸­çš„åœ°ä½ç­‰åŒäº Hibernate åœ¨ Java ä¸­çš„åœ°ä½

3. **ORM çš„ä¼˜åŠ¿**ï¼š
   - âœ… å¯¹è±¡åŒ–çš„æ•°æ®æ“ä½œ
   - âœ… è‡ªåŠ¨é˜² SQL æ³¨å…¥
   - âœ… è·¨æ•°æ®åº“å…¼å®¹
   - âœ… ç±»å‹å®‰å…¨
   - âœ… ä»£ç å¯è¯»æ€§é«˜
---

**å¦‚æœ‰ç–‘é—®ï¼Œè¯·å‚è€ƒ README.md æˆ–è”ç³»å¼€å‘å›¢é˜Ÿã€‚**

