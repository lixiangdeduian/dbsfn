# 任务说明

你是一个全栈工程师，请基于本仓库的 MySQL 医院管理系统数据库（库名 `hospital_test`）实现一个“后台管理系统”前后端，并保证与现有的安全/角色/视图设计一致。

### 一、必须读取/遵循的仓库事实（强约束）

1. 数据库脚本入口位于 `database/`：`schema.sql`、`triggers.sql`、`routines.sql`、`security.sql`、`seed.sql`。
2. 角色与授权以 `database/sql/security/4_grants.sql` 为准：其中定义了各 `role_*` 角色能访问的对象与权限。
3. 左侧菜单展示“视图（VIEW）和 基本表”，且必须覆盖 `database/sql/security/4_grants.sql` 中该角色被授予权限的每一个视图和基本表。

### 二、前端（后台管理界面）要求

1. 不需要登录页：访问 Web 根路径即可直接进入后台管理界面。
2. 顶部栏右侧提供“角色切换器”：可在不同角色间切换（至少包含 `role_admin` 等脚本内角色，并额外提供一个“超级管理员”选项）。
3. 左侧栏根据当前角色动态渲染可见视图和基本表列表：
   - 列表项必须来自 `database/sql/security/4_grants.sql` 中对该角色授予权限的视图和基本表集合。
   - 对于同一视图或基本表，如果该角色除了 `SELECT` 之外还拥有 `INSERT/UPDATE/DELETE` 任一权限，则在菜单中用标识符区分为“可写（RW）”，否则标识为“只读（R）”。
4. 主区域提供通用数据浏览能力：
   - 点击左侧视图或基本表后，展示该视图或基本表的列信息与行数据（分页即可）。
   - 若该视图或基本表为“可写（RW）”，界面应显式标出“具备写权限（使用一个 logo 标识）”。
5. 超级管理员角色（前端显示名可为 `super_admin`）：
   - 能查看所有表（BASE TABLE）与视图（VIEW）。
   - 拥有所有权限（等价于数据库的 `role_admin`/全权访问）。

### 三、后端要求（ORM + 数据驱动菜单）

1. 使用 ORM 实现应用程序与 MySQL 的交互（不仅仅是裸 SQL 拼接）。
2. 后端必须提供 API 支持前端：
   - 角色列表（包含超级管理员）。
   - 根据角色返回左侧菜单（视图 + 权限标识 R/RW）。
   - 根据对象名（视图/表）读取数据与列信息（支持分页）。
3. 权限模型必须“尊重数据库授权”：
   - 普通角色：仅能访问其被授予权限的视图（以及必要时允许访问其被授予的少量基表，但前端菜单仍只显示视图）。
   - 超级管理员：可访问所有对象。
4. 角色切换不依赖登录：后端以“请求参数/请求头携带的 role”作为当前角色上下文，并在数据库连接中 `SET ROLE ...`（或等价机制）来模拟该角色权限。

### 四、交付与验收（可操作）

1. 代码放在仓库内独立目录（例如 `/backend`、`/frontend`），不要修改现有 SQL 逻辑（除非为集成演示必须）。
2. 提供清晰的运行说明（环境变量、启动命令、数据库初始化顺序）。
3. 至少提供 3 个可手动验证的验收点：
   - 切换不同角色，左侧菜单视图和基本表集合发生变化且与 `4_grants.sql` 一致。
   - 同一视图或基本表在不同角色下 RW/R 标识正确。
   - 超级管理员能看到所有表与视图。
